<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<div ng-cloak="" ng-controller="identityUsersTableController">
    <md-card>

        <md-card-content>
            <section layout="row" layout-sm="column" layout-align="end center" layout-wrap>
                <md-button class="md-raised md-primary">Create Users</md-button>
                <md-button class="md-raised md-primary btn-launch ng-scope"
                           ng-click="modal.openMapVmsWizard()"
                           ng-controller="MapVmsModalController as modal">
                    Map VMs
                </md-button>
            </section>

            <md-tabs md-dynamic-height="" md-border-bottom="">
                <md-tab label="Users">
                    <md-content class="md-padding">
                        <section layout="row" layout-xs="column">
                            <section flex="" layout-align="center center">
                                <md-input-container ng-show="!selected.length" md-no-float="" class="md-block left">
                                    <md-icon>
                                        <i class="material-icons">search</i>
                                    </md-icon>
                                    <input type="text" ng-model="searchquery" placeholder="Search By name, computer..."/>
                                </md-input-container>
                                <md-content ng-show="selected.length">
                                    <div>{$selected.length$} {$selected.length &gt; 1 ? 'items' : 'item'$} selected
                                    </div>
                                </md-content>
                            </section>
                            <section flex="" layout-align="center center">
                                <md-button class="md-fab md-mini md-primary" aria-label="add new" ng-click="refresh()">
                                    <md-icon>refresh</md-icon>
                                    <md-tooltip>Refresh Data</md-tooltip>
                                </md-button>
                                <md-button class="md-fab md-mini md-primary" aria-label="add new"
                                           ui-sref="addEditClinic({passModelData : null, postMode:'addnew'})"
                                           ng-show="!selected.length">
                                    <md-icon>add</md-icon>
                                    <md-tooltip>Add New</md-tooltip>
                                </md-button>
                                <md-button class="md-fab md-mini md-primary" aria-label="edit"
                                           ng-show="selected.length == 1"
                                           ui-sref="addEditClinic({passModelData : selected[0], postMode: 'edit' })">
                                    <md-icon>edit</md-icon>
                                    <md-tooltip>Edit</md-tooltip>
                                </md-button>
                                <md-button class="md-fab md-mini md-primary" aria-label="delete"
                                           ng-show="selected.length" ng-click="deleteSelected($event, selected)">
                                    <md-icon>delete</md-icon>
                                    <md-tooltip>Delete</md-tooltip>
                                </md-button>
                                <md-button class="md-fab md-mini md-primary" aria-label="view"
                                           ng-show="selected.length == 1"
                                           ui-sref="viewClinic({passModelData : selected[0]})">
                                    <md-icon>insert_drive_file</md-icon>
                                    <md-tooltip>View</md-tooltip>
                                </md-button>
                            </section>
                        </section>
                        <md-table-container>
                            <table md-table md-row-select multiple ng-model="selected">
                                <thead md-head md-order="query.order">
                                <tr md-row>
                                    <th md-column>User Name</th>
                                    <th md-column>Email</th>
                                    <th md-column>Computer</th>
                                    <th md-column>Action</th>
                                </tr>
                                </thead>
                                <tbody md-body>
                                <tr md-row md-select="user" md-select-id="name" md-auto-select
                                    ng-repeat="user in ldapusers | filter: searchquery | orderBy: query.order | limitTo: query.limit : (query.page -1) * query.limit">
                                    <td md-cell>{$user.username$}</td>
                                    <td md-cell>{$user.mail$}</td>
                                    <td md-cell>
                                        <span ng-if="user.computer != null">{$user.computer$}</span>
                                        <span ng-if="user.computer == null">----</span>
                                    </td>
                                    <td md-cell></td>
                                </tr>
                                </tbody>
                            </table>
                        </md-table-container>

                        <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page"
                                             md-total="{$ldapuserscount$}" md-page-select="true"
                                             md-boundary-links="true"></md-table-pagination>

                    </md-content>
                </md-tab>
            </md-tabs>
        </md-card-content>
    </md-card>
</div>